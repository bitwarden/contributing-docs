---
adr: "0025"
status: Proposed
date: 2025-05-30
tags: [clients, typescript]
---

# 0025 - Deprecate TypeScript Enum Types

<AdrTable frontMatter={frontMatter}></AdrTable>

## Context and Problem Statement

TypeScript experts have long discouraged the use of enums. There are a variety of cited reasons.
Among them:

- Enums that are not `const` substantially increase output size.
- Numeric enums implicitly cast from `number` to the enum type, which allows invalid enum values to
  be transmitted to functions.
- String enums are named types that require a member is used, which is inconsistent with the
  behavior of numeric enums.

These inconsistencies cause increased complexity from guard statements in the best of cases. In the
worst cases, their limitations may be unknown, and thus unguarded. Reducing or eliminating

### Detection

Typescript deprecation can be linted using a fairly short ESlint plugin. The code has
[already been contributed to main](no-enum-lint) as a suggestion. The same PR adds `FIXME` comments
for each team to address.

### Replacement code

In most cases, enums are unnecessary. A readonly (`as const`) object coupled with a type alias
avoids both code generation and type inconsistencies.

```ts
export const CipherType = {
  Login: 1,
  SecureNote: 2,
  Card: 3,
  Identity: 4,
  SshKey: 5,
} as const;

export type CipherType = (typeof CipherType)[keyof typeof CipherType];

// Can be imported together
import { CipherType } from "./cipher-type";

// Used as a type
function doSomething(type: CipherType) {}

// And used as a value (just like a regular `enum`)
doSomething(CipherType.Card);
```

## Considered Options

- **Allow enums, but advise against them** - This is the current state of affairs, as implemented by
  the aforementioned PR. With this option, teams MUST address the readmes, but MAY address them by
  disabling the lint.
- **Deprecate enum use** - Allow enums to exist for historic purposes, but prohibit the introduction
  of new ones. Increase the lint to a "warning". This lets legacy code continue running
  indefinitely, and would allow for cases where autogenerated code introduces an enum by necessity.
- **Eliminate enum use** - Prohibit the introduction of any new enum and replace all enums in the
  codebase with typescript objects. Increase the lint to an "error".

## Decision Outcome

Chosen option: **Deprecate enum use**

### Positive Consequences

- Developers receive a warning in their IDE, which discourages new enums.
- The warning can direct them to our contributing docs, where they can learn typesafe alternatives.
- Over time, our code size decreases as enums are replaced.
- If all teams eliminate enums in practice, the warning can be increased to an error.

### Negative Consequences

- Unnecessary usage may persist indefinitely on teams carrying a high tech debt.
- The lint increases the number of FIXME comments in the code by about 10%.

### Plan

- Update contributing docs with patterns and best practices for enum replacement.
- Update the reporting level of the lint to "warning".
